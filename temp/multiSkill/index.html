<html>
    <head>
        <script type="text/javascript" charset="utf8" src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
    </head>
    <body>
        <center><img src="img/loading.gif" /></center>
        <script>
            var pathToData = "engagementInfo.skill";
            var notificationHandler = function(data) {
                // Do something with the notifications
            };
            var focusHandler = function() {
                // Do something when the visitor is focused
                // Assume the visitor is focused to begin with
                lpTag.agentSDK.bind(pathToData, updateCallback, notifyWhenDone);
            };
            var blurHandler = function() {
                // Do something when the visitor is blurred
                // Assume the visitor is focused to begin with
            };
            var updateCallback = function(data) {
                // Do something with the returning data
                var path = data.key;
                var value = data.newValue;
                // called each time the value is updated.
                // If there's an existing value when bind is called - this callback
                // will be called with the existing value
                console.log(value);
                if(data.trim() === "Spanish") {
                    console.log("sp");
                }
                else if(data.trim() === "Customer Service EUR") {
                    console.log("er");
                }
                else {
                    console.log("nothing");
                }
            };
            var notifyWhenDone = function(err) {
                if (err) {
                    // Do something with the error
                }
                // called when the bind is completed successfully,
                // or when the action terminated with an error.
            };

            lpTag.agentSDK.init({
                notificationCallback: notificationHandler,
                visitorFocusedCallback: focusHandler,
                visitorBlurredCallback: blurHandler
            });
            lpTag.agentSDK.bind(pathToData, updateCallback, notifyWhenDone);
        </script>
    </body>
</html>